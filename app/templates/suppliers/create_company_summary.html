{% extends "suppliers/layout.html" %}
{% from "components/breadcrumbs/macro.njk" import govukBreadcrumbs %}
{% from "components/button/macro.njk" import govukButton %}
{% from "components/summary-list/macro.njk" import govukSummaryList %}

{% import "toolkit/summary-table.html" as summary %}

{% block pageTitle %}Check your information – Create a supplier account – Digital Marketplace{% endblock %}

{% block beforeContent %}
{{
  govukBreadcrumbs({
    'items': [
      {
        'href': '/',
        'text': 'Digital Marketplace'
      },
      {
        'href': url_for('.become_a_supplier'),
        'text': 'Become a supplier'
      },
      {
        'href': url_for('.create_new_supplier'),
        'text': 'Create an account'
      }
    ]
  })
}}
{% endblock %}

{% block mainContent %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
      {% if missing_fields %}
      <div class="banner-destructive-without-action">
        <p class="banner-message">
          You must answer all the questions.
        </p>
      </div>
      {% endif %}

    <div class="company-information-summary">
      <h1 class="govuk-heading-l">Check your information</h1>

      <h2 class="govuk-heading-m">Your company details</h2>
      {{
        govukSummaryList({
          'rows': [
            {
              'key': {
                'text': "DUNS number"
              },
              'value': {
                'text': session.get('duns_number', "You must answer this question.")
              },
              'actions': {
                'items': [
                  {
                    'href': url_for(".duns_number", _anchor="input-duns_number"),
                    'text': "Change",
                    'visuallyHiddenText': "DUNS number"
                  }
                ]
              }
            },
            {
              'key': {
                'text': "Company name"
              },
              'value': {
                'text': session.get('company_name', "You must answer this question.")
              },
              'actions': {
                'items': [
                  {
                    'href': url_for(".company_details", _anchor="input-company_name"),
                    'text': "Change",
                    'visuallyHiddenText': "Company name"
                  }
                ]
              }
            },
            {
              'key': {
                'text': "Contact name"
              },
              'value': {
                'text': session.get('contact_name', "You must answer this question.")
              },
              'actions': {
                'items': [
                  {
                    'href': url_for(".company_details", _anchor="input-contact_name"),
                    'text': "Change",
                    'visuallyHiddenText': "Contact name"
                  }
                ]
              }
            },
            {
              'key': {
                'text': "Contact email"
              },
              'value': {
                'text': session.get('email_address', "You must answer this question.")
              },
              'actions': {
                'items': [
                  {
                    'href': url_for(".company_details", _anchor="input-email_address"),
                    'text': "Change",
                    'visuallyHiddenText': "Contact email"
                  }
                ]
              }
            },
            {
              'key': {
                'text': "Contact phone number"
              },
              'value': {
                'text': session.get('phone_number', "You must answer this question.")
              },
              'actions': {
                'items': [
                  {
                    'href': url_for(".company_details", _anchor="input-phone_number"),
                    'text': "Change",
                    'visuallyHiddenText': "Contact phone number"
                  }
                ]
              }
            }
          ]
        })
      }}

      <h2 class="govuk-heading-m">Your login details</h2>
      {{
        govukSummaryList({
          'rows': [
            {
              'key': {
                'text': "Email address"
              },
              'value': {
                'text': session.get('account_email_address', "You must answer this question.")
              },
              'actions': {
                'items': [
                  {
                    'href': url_for(".create_your_account", _anchor="input-email_address"),
                    'text': "Change",
                    'visuallyHiddenText': "Email address"
                  }
                ]
              }
            }
          ]
        })
      }}
    </div>
    <form action="{{ url_for('.submit_company_summary')}}" method="POST">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
      {{
        govukButton({
          'text': 'Create account'
        })
      }}
    </form>
  </div>
</div>
{% endblock %}
